---
description: Enhance an existing CLAUDE.md with Bitwarden's standardized template structure and supplementary research
allowed-tools: Read, Edit(CLAUDE.md), WebFetch, Grep, Glob
---

Enhance the existing CLAUDE.md file with Bitwarden's standardized template format.

**Prerequisites**: This command expects a CLAUDE.md file to already exist in the repository root (typically generated by Anthropic's `/init` command).

**Instructions:**

1. **Read Existing CLAUDE.md**: First, read the current CLAUDE.md file to understand what has already been documented about the project.

2. **Supplementary Research**: Perform additional codebase analysis to fill gaps and gather information for Bitwarden's extended sections:
   - Examine security-related code, authentication flows, and authorization patterns
   - Identify anti-patterns, common mistakes, or areas of technical debt
   - Review data models, database schemas, and API contracts
   - Look for configuration management, environment variables, and secrets handling
   - Find testing patterns, utilities, and coverage expectations
   - Identify external documentation sources and authoritative references

3. **Enhance CLAUDE.md**: Restructure the file to use **exactly** the following six sections. 

**CRITICAL REQUIREMENTS:**
- The final CLAUDE.md MUST use these exact headings verbatim - no other top-level headings are allowed
- ALL content from the original CLAUDE.md MUST be incorporated into one of these six sections - do not remove any information
- Reorganize and merge existing content into the appropriate sections below
- Add new information from your supplementary research to fill gaps

**Required Sections (use these exact headings):**

## Overview
- Brief description of the business domain and project purpose
- Key concepts and terminology specific to this codebase
- Primary user types and their main workflows
- Integration points with external systems

## Architecture & Patterns
- High-level folder structure and organization
- Module boundaries and layer dependencies
- Communication patterns between components
- Design patterns and architectural decisions
- External service integrations

## Stack Best Practices
- Language-specific idioms and conventions used in this codebase
- Framework patterns and recommended approaches
- Dependency injection and configuration patterns
- Error handling and validation strategies
- Testing approaches and utilities
- Where to find authoritative documentation on the web

## Anti-Patterns
- Common mistakes to avoid in this codebase
- Security concerns (e.g., logging sensitive data, hardcoded secrets)
- Performance pitfalls
- Maintenance anti-patterns (e.g., non-parameterized SQL queries)

## Data Models
- Core domain entities and their relationships
- Key value objects and DTOs
- Data validation rules and constraints
- Database migration patterns
- API request/response formats

## Configuration, Security, and Authentication
- Environment variable management
- Secrets handling 
- Authentication and authorization flows
- API security patterns and middleware
- Compliance requirements and security controls

**Enhancement Guidelines:**
- **No information loss**: Every piece of content from the original CLAUDE.md must appear in the final output, incorporated into the appropriate section
- **Strict heading structure**: Only the six headings above are permitted as top-level sections - merge any other headings as subsections or bullet points within the appropriate section
- **Fill gaps**: Add information for any sections that are missing or incomplete based on your supplementary research
- **Be specific**: Include concrete examples, file paths, and code references from this codebase
- **Prioritize security**: Pay special attention to authentication, authorization, and data protection patterns
- **Stay current**: Reference actual patterns found in the code, not assumptions
- **Keep it concise**: Bullet points and clear structure over verbose paragraphs

**Content Quality Standards:**
- Every section should have substantive, codebase-specific content
- Avoid generic advice that could apply to any project
- Include file paths and specific examples where helpful (e.g., "See `src/auth/guards/` for authentication guards")
- Note any deviations from standard practices and why they exist

**Final Step**: After enhancing CLAUDE.md, provide a brief summary of what was added or changed compared to the original file.
